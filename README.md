![Python](https://img.shields.io/badge/python-3670A0?style=for-the-badge&logo=python&logoColor=ffdd54)
![Django](https://img.shields.io/badge/django-%23092E20.svg?style=for-the-badge&logo=django&logoColor=white)
![Docker](https://img.shields.io/badge/docker-%230db7ed.svg?style=for-the-badge&logo=docker&logoColor=white)
![Nginx](https://img.shields.io/badge/nginx-%23009639.svg?style=for-the-badge&logo=nginx&logoColor=white)
![Gunicorn](https://img.shields.io/badge/gunicorn-%298729.svg?style=for-the-badge&logo=gunicorn&logoColor=white)
![GitHub Actions](https://img.shields.io/badge/github%20actions-%232671E5.svg?style=for-the-badge&logo=githubactions&logoColor=white)
![PostgreSQL](https://img.shields.io/badge/postgres-%23316192.svg?style=for-the-badge&logo=postgresql&logoColor=white)
![JavaScript](https://img.shields.io/badge/javascript-%23323330.svg?style=for-the-badge&logo=javascript&logoColor=%23F7DF1E)

# üçΩÔ∏è Foodgram ‚Äî –°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å –¥–ª—è –æ–±–º–µ–Ω–∞ —Ä–µ—Ü–µ–ø—Ç–∞–º–∏

**Foodgram** ‚Äî —ç—Ç–æ –≤–µ–±-—Å–µ—Ä–≤–∏—Å, –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã, –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ –ª—é–±–∏–º—ã—Ö –∞–≤—Ç–æ—Ä–æ–≤, –¥–æ–±–∞–≤–ª—è—Ç—å –±–ª—é–¥–∞ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫.

## üåü –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- ‚úÖ –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Ä–µ—Ü–µ–ø—Ç–æ–≤ —Å —Ñ–æ—Ç–æ, –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∞–≤—Ç–æ—Ä–æ–≤
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –≤ —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ—Ü–µ–ø—Ç–æ–≤ –ø–æ —Ç–µ–≥–∞–º: –∑–∞–≤—Ç—Ä–∞–∫, –æ–±–µ–¥, —É–∂–∏–Ω
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –≤ —Å–ø–∏—Å–∫–µ –ø–æ–∫—É–ø–æ–∫
- ‚úÖ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–∫—É–ø–æ–∫ –≤ PDF
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT-—Ç–æ–∫–µ–Ω—ã
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (Redoc)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ GitHub Actions

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ 

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ —Å–≤–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä:

    ```bash
    git clone https://github.com/PletnevDaniil/foodgram.git
    ```
    ```bash
    cd foodgram
    ```
2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞. –ü—Ä–∏–º–µ—Ä:

    ```
    DB_NAME=foodgram # –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    POSTGRES_DB=foodgram
    POSTGRES_USER=foodgram_user # –õ–æ–≥–∏–Ω –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
    POSTGRES_PASSWORD=your_strong_password # –ø–∞—Ä–æ–ª—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
    DB_HOST=db # –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    DB_PORT=5432 # –ü–æ—Ä—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

    ALLOWED_HOST= 127.0.0.1, localhost
    SECRET_KEY=your_django_secret_key
    DEBUG=0
    ```

### –°–æ–∑–¥–∞–Ω–∏–µ Docker-–æ–±—Ä–∞–∑–æ–≤

1.  –°–æ–∑–¥–∞–Ω–∏–µ Docker-–æ–±—Ä–∞–∑–æ–≤ (–ó–∞–º–µ–Ω–∏—Ç–µ username –Ω–∞ –≤–∞—à –ª–æ–≥–∏–Ω –Ω–∞ DockerHub):

    ```bash
    cd frontend
    docker build -t username/foodgram_frontend .
    cd ../backend
    docker build -t username/foodgram_backend .
    cd ../nginx
    docker build -t username/foodgram_gateway . 
    ```

2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –æ–±—Ä–∞–∑—ã –Ω–∞ DockerHub (–ó–∞–º–µ–Ω–∏—Ç–µ username –Ω–∞ –≤–∞—à –ª–æ–≥–∏–Ω –Ω–∞ DockerHub):

    ```bash
    docker push username/foodgram_frontend
    docker push username/foodgram_backend
    docker push username/foodgram_gateway

### –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —É–¥–∞–ª–µ–Ω–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É

    ```bash
    ssh -i –ø—É—Ç—å_–¥–æ_—Ñ–∞–π–ª–∞_—Å_SSH_–∫–ª—é—á–æ–º/–Ω–∞–∑–≤–∞–Ω–∏–µ_—Ñ–∞–π–ª–∞_—Å_SSH_–∫–ª—é—á–æ–º –∏–º—è_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è@ip_–∞–¥—Ä–µ—Å_—Å–µ—Ä–≤–µ—Ä–∞ 
    ```

2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é foodgram —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª

    ```bash
    mkdir foodgram
    ```

3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ docker compose –Ω–∞ —Å–µ—Ä–≤–µ—Ä:

    ```bash
    sudo apt update
    sudo apt install curl
    curl -fSL https://get.docker.com -o get-docker.sh
    sudo sh ./get-docker.sh
    sudo apt-get install docker-compose-plugin
    ```

4. –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é foodgram/ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã docker-compose.production.yml –∏ .env:

    ```bash
    scp -i path_to_SSH/SSH_name docker-compose.production.yml username@server_ip:/home/username/kittygram/docker-compose.production.yml
    * ath_to_SSH ‚Äî –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å SSH-–∫–ª—é—á–æ–º.
    * SSH_name ‚Äî –∏–º—è —Ñ–∞–π–ª–∞ —Å SSH-–∫–ª—é—á–æ–º.
    * username ‚Äî –≤–∞—à–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
    * server_ip ‚Äî IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.
    * –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ .env –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ SECRET_KEY, POSTGRES_PASSWORD.
    ```

5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ docker compose –≤ —Ä–µ–∂–∏–º–µ –¥–µ–º–æ–Ω–∞:

    ```bash
    sudo docker compose -f docker-compose.production.yml up -d
    ```

6. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏, —Å–æ–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –±—ç–∫–µ–Ω–¥–∞ –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏—Ö –≤ /backend_static/static/:

    ```bash
    sudo docker compose -f docker-compose.production.yml exec backend python manage.py migrate
    sudo docker compose -f docker-compose.production.yml exec backend python manage.py collectstatic
    sudo docker compose -f docker-compose.production.yml exec backend cp -r /app/collected_static/. /app/static/
    ```

7. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –±–∞–∑—É —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

    ```bash
    docker-compose exec backend python manage.py import_data
    ```

8. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ nano –æ—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥ Nginx:

    ```bash
    sudo nano /etc/nginx/sites-enabled/default
    ```

9. –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ location –≤ —Å–µ–∫—Ü–∏–∏ server:

    ```bash
    location / {
        proxy_set_header Host $http_host;
        proxy_pass http://127.0.0.1:7000;
    }
    ```

10. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥–∞ Nginx:

    ```bash
    sudo nginx -t
    ```
    –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Ç–∞–∫–æ–π, –∑–Ω–∞—á–∏—Ç, –æ—à–∏–±–æ–∫ –Ω–µ—Ç:
    ```bash
    nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
    nginx: configuration file /etc/nginx/nginx.conf test is successful
    ```

11. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º Nginx
    ```bash
    sudo service nginx reload
    ```
### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–î–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
üëâ https://your_domain/redoc/

–°–æ–¥–µ—Ä–∂–∏—Ç:

- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
- ‚úÖ –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- ‚úÖ Base64ImageField ‚Äî –∏–∑ drf_extra_fields –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è ‚Äî –∫–∞—Å—Ç–æ–º–Ω–∞—è —Å ?limit=
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è ‚Äî –ø–æ —Ç–µ–≥–∞–º, –∏–∑–±—Ä–∞–Ω–Ω–æ–º—É, —Å–ø–∏—Å–∫—É –ø–æ–∫—É–ø–æ–∫
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è ‚Äî prefetch_related, bulk_create, only()
- ‚úÖ PDF-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è ‚Äî —Å–ø–∏—Å–∫–∞ –ø–æ–∫—É–ø–æ–∫

### –ê–≤—Ç–æ—Ä
[–ü–ª–µ—Ç–Ω–µ–≤ –î–∞–Ω–∏–∏–ª –ú–∏—Ö–∞–π–ª–æ–≤–∏—á](https://github.com/PletnevDaniil)